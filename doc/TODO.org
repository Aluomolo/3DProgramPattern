* DONE change to rescript

# * TODO use english comment instead of chinese comment

* DONE refactor: use worldState instead managerState in exec func

* DONE multithread demo


** DONE no worker

draw one triangle

draw 3000 triangles



** DONE open render worker


** DONE optimize: change programMap to program

# ** TODO move build model matrix to update->BuildModelMatrixJob
# ** TODO update add DoSomeHeaveComputeJob
** DONE add localToWorlds, add UpdateTransformJob

add


compute fps, timeline



** DONE update add //ComputeCollisionJob ComputePhysicsJob


** DONE move ComputePhysicsJob to physics worker


worker


noWorker add it


# ** TODO open more workers by pipeline + json



# ** TODO shared DO by SharedArrayBuffer

** DONE rename story_after to story_improve

** DONE support worker, no worker


** DONE add UMLs

before

improve

abstract



# 类图

时序图
two frame

three worker

post message

SharedArrayBuffer


** DONE add abstract code


* DONE glsl build demo

** DONE glsl compiler->Chunks

# change to rescript

# add as gulp task

# pass run test


////clean first



** DONE 

- load json
use most

配置数据
    shaders.json
    shader_libs.json

- parse json


run test in engine/

** DONE 
independent, add funcs to handle branch



# - handle shader libs with shader config
# static branch
#     fixed branch name
# dynamic branch
#     fixed

# <!-- define:
# handle define const -->


# pass run test

- handle sender
sender: add to specific sender array
attribute
uniform


add pos, type, send func, ...


engine:
add sendDataArr to state;
add log: create shader with glsl
add RenderJob:
    use it when draw;


pass run test

** DONE refactor: uniform material_shaders, no_material_shaders to shaders

remove material concept


# ** TODO rename splice_pattern_engine to engine


** DONE 
- get chunks to state
- Builder: shader libs + Chunks to vs glsl, fs glsl
support all parts




result:
glsl
sender



add getHandle

add set define count:light count


# fix:
# import
# body last newLine


# fix:
# basic material use render_basic;
# move render_basic from client to engine;
# handle multiple materials?:
#     change initBasicMaterialShader to allMaterials


** DONE refactor glsl: only remain used glsl

# ** TODO refactor: clean code

** DONE story before

glsl

send:
judge when render

*** DONE refactor:move duplicate to utils/


** DONE fix

2uniform

attribute order


** DONE abstract

draft


update import path


** DONE uml

domain model

flow


story improve:
shader组合图


abstract UML:
this pattern is not only for glsl, but for else!

load config

parse config

build target(string) by config

get runtime data when init by target




* TODO finish splice pattern article

shaders.json hook

vs_function或者fs_function

** DONE remove batch instance




* TODO 重命名“类图”为“领域模型”

* TODO 重命名“客户”为“用户”

TODO handle 依赖隔离模式

* TODO 抽象代码都用Typescript

* TODO 简化抽象代码

* TODO 简化UML

* TODO give where has code, uml and how to run code and run result for each example

    TODO give how to run rescript code(pipeline pattern should mention it!)



# * TODO 修改接口为type，《type》



* TODO package.json supply dependencies, devDependencies
e.g. most, commonlib


* TODO 移除"import"相关代码



* TODO 重写“依赖隔离模式”，统一格式


* TODO 整理每个package代码，给出运行代码的script；并在README中说明如何运行，怎样运行


* TODO 书给出网站（包含代码）二维码


** TODO 代码示例

https://github.com/nivance/DPModel